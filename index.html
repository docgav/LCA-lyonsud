<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #36c0a0; -webkit-text-stroke: #36c0a0}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #d4d4d4; -webkit-text-stroke: #d4d4d4}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s13 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s14 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"fr"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Apprentissage de la Lecture Critique : La Randomisation</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.gstatic.com"</span><span class="s4"> </span><span class="s2">crossorigin</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;family=Roboto+Slab:wght@400;700&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Ajout de Chart.js et du plugin pour les labels --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/chart.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">sans-serif</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #f8fafc</span><span class="s7">;</span><span class="s1"> </span><span class="s9">/* slate-50 */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">h1</span><span class="s7">,</span><span class="s1"> </span><span class="s6">h2</span><span class="s7">,</span><span class="s1"> </span><span class="s6">h3</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s8">'Roboto Slab'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">serif</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">/* Animation pour l'apparition des sections */</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.hidden-section</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s10">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">20px</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">opacity</span><span class="s4"> </span><span class="s10">0.5s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s7">,</span><span class="s4"> </span><span class="s1">transform</span><span class="s4"> </span><span class="s10">0.5s</span><span class="s4"> </span><span class="s1">ease-out</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.visible-section</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">opacity:</span><span class="s1"> </span><span class="s10">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s10">0</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 text-slate-800"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white shadow-md"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-4xl font-bold text-slate-900"</span><span class="s3">&gt;</span><span class="s1">Apprendre la Lecture Critique d'Article</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-2 text-xl text-slate-600"</span><span class="s3">&gt;</span><span class="s1">Module Interactif sur la Randomisation</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">header</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">main</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 space-y-12"</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- PARTIE 1 : RANDOMISATION SIMPLE --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">section</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"simple-randomization"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 rounded-lg shadow-lg"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-cyan-700 border-b-2 border-cyan-100 pb-2"</span><span class="s3">&gt;</span><span class="s4">1. Randomisation Simple</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-4 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">Chaque participant a une chance égale (50%) d'être assigné au groupe "Traité" ou "Placebo". Par pur hasard, cette méthode peut conduire à des déséquilibres importants dans la taille des groupes.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s1"> </span><span class="s2">for</span><span class="s3">=</span><span class="s5">"simple-n"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-bold"</span><span class="s3">&gt;</span><span class="s1">Nombre de participants :</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"simple-n"</span><span class="s4"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"30"</span><span class="s4"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"10"</span><span class="s4"> </span><span class="s2">max</span><span class="s3">=</span><span class="s1">"500"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-24 p-2 border border-slate-300 rounded-md"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"simulateSimpleRandomization()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-cyan-600 text-white font-semibold rounded-md hover:bg-cyan-700 transition"</span><span class="s3">&gt;</span><span class="s4">Lancer la simulation</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"simple-results-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-cyan-50 border border-cyan-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 p-4 rounded-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s1">Visualisation des Effectifs</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"simpleChart"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-8 text-right"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"showNext('block-randomization')"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"</span><span class="s3">&gt;</span><span class="s4">Passer à l'exercice suivant →</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">section</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- PARTIE 2 : RANDOMISATION PAR BLOCS (initialement cachée) --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">section</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"block-randomization"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 rounded-lg shadow-lg hidden hidden-section"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-green-700 border-b-2 border-green-100 pb-2"</span><span class="s3">&gt;</span><span class="s4">2. Randomisation par Blocs</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-4 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">La randomisation par blocs garantit un équilibre régulier de la taille des groupes en randomisant par "blocs" de taille fixe (ici, 4), où chaque bloc contient 2 "Traité" et 2 "Placebo".</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s1"> </span><span class="s2">for</span><span class="s3">=</span><span class="s5">"block-n"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-bold"</span><span class="s3">&gt;</span><span class="s1">Nb. de participants (multiple de 4) :</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"block-n"</span><span class="s4"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"32"</span><span class="s4"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"8"</span><span class="s4"> </span><span class="s2">max</span><span class="s3">=</span><span class="s1">"500"</span><span class="s4"> </span><span class="s2">step</span><span class="s3">=</span><span class="s1">"4"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-24 p-2 border border-slate-300 rounded-md"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"simulateBlockRandomization()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition"</span><span class="s3">&gt;</span><span class="s4">Lancer la simulation</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"block-list-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-4 p-4 bg-slate-100 rounded-md text-sm"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"block-results-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-green-50 border border-green-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 p-4 rounded-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s1">Visualisation des Effectifs</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"blockChart"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-8 text-right"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"showNext('population-randomization')"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"</span><span class="s3">&gt;</span><span class="s4">Passer à l'exercice suivant →</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">section</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- PARTIE 3 : RANDOMISATION &amp; FACTEURS PRONOSTIQUES (initialement cachée) --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">section</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"population-randomization"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 rounded-lg shadow-lg hidden hidden-section"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-amber-700 border-b-2 border-amber-100 pb-2"</span><span class="s3">&gt;</span><span class="s4">3. Blocs &amp; Facteurs Pronostiques</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-4 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">Même avec des effectifs équilibrés, un déséquilibre peut survenir sur des facteurs importants (ex: le sexe). Une randomisation par blocs simple ne garantit PAS que les proportions H/F seront égales dans les groupes finaux.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s1"> </span><span class="s2">for</span><span class="s3">=</span><span class="s5">"population-n"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-bold"</span><span class="s3">&gt;</span><span class="s1">Taille de l'échantillon (multiple de 4) :</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"population-n"</span><span class="s4"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"40"</span><span class="s4"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">max</span><span class="s3">=</span><span class="s1">"500"</span><span class="s4"> </span><span class="s2">step</span><span class="s3">=</span><span class="s1">"4"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-24 p-2 border border-slate-300 rounded-md"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"simulatePopulationAndBlockRandomization()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-amber-600 text-white font-semibold rounded-md hover:bg-amber-700 transition"</span><span class="s3">&gt;</span><span class="s4">Lancer la simulation</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 space-y-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"population-sample-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-amber-50 border border-amber-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"population-results-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-amber-50 border border-amber-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 p-4 rounded-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s1">Répartition H/F dans les Groupes</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"populationResultChart"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-8 text-right"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"showNext('stratified-randomization')"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"</span><span class="s3">&gt;</span><span class="s4">Passer à l'exercice suivant →</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">section</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- PARTIE 4 : RANDOMISATION STRATIFIÉE (initialement cachée) --&gt;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;!-- =================================================================================== --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">section</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-randomization"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-6 rounded-lg shadow-lg hidden hidden-section"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h2</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-pink-700 border-b-2 border-pink-100 pb-2"</span><span class="s3">&gt;</span><span class="s4">4. Randomisation Stratifiée</span><span class="s3">&lt;/</span><span class="s6">h2</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-4 text-slate-600"</span><span class="s3">&gt;</span><span class="s1">Pour garantir l'équilibre d'un facteur, on applique une randomisation par blocs </span><span class="s3">&lt;</span><span class="s6">b</span><span class="s3">&gt;</span><span class="s1">séparément dans chaque strate</span><span class="s3">&lt;/</span><span class="s6">b</span><span class="s3">&gt;</span><span class="s1"> (hommes et femmes). Cela garantit un équilibre quasi-parfait du facteur entre les groupes.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">             </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s1"> </span><span class="s2">for</span><span class="s3">=</span><span class="s5">"stratified-n"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"font-bold"</span><span class="s3">&gt;</span><span class="s1">Taille de l'échantillon :</span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"number"</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-n"</span><span class="s4"> </span><span class="s2">value</span><span class="s3">=</span><span class="s1">"40"</span><span class="s4"> </span><span class="s2">min</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">max</span><span class="s3">=</span><span class="s1">"500"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-24 p-2 border border-slate-300 rounded-md"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">onclick</span><span class="s3">=</span><span class="s1">"simulateStratifiedRandomization()"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-4 py-2 bg-pink-600 text-white font-semibold rounded-md hover:bg-pink-700 transition"</span><span class="s3">&gt;</span><span class="s4">Lancer la simulation</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mt-6 space-y-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-sample-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-pink-50 border border-pink-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-men-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 bg-slate-100 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-women-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 bg-slate-100 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"stratified-results-summary"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-4 bg-pink-50 border border-pink-200 rounded-md"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-slate-50 p-4 rounded-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">h3</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-lg font-bold text-center mb-2"</span><span class="s3">&gt;</span><span class="s1">Répartition H/F dans les Groupes</span><span class="s3">&lt;/</span><span class="s6">h3</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"stratifiedResultChart"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">section</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">footer</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center py-6 text-slate-500 text-sm"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">Créé pour l'apprentissage de la lecture critique.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">footer</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s1">// Enregistrer le plugin de datalabels globalement</span></p>
<p class="p7"><span class="s1">Chart</span><span class="s7">.</span><span class="s4">register</span><span class="s7">(</span><span class="s1">ChartDataLabels</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// Couleurs</span></p>
<p class="p8"><span class="s12">const</span><span class="s4"> </span><span class="s13">TRAITE_COLOR</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'rgba(34, 211, 238, 0.8)'</span><span class="s7">;</span><span class="s4"> <span class="Apple-converted-space">  </span></span><span class="s9">// Cyan</span></p>
<p class="p8"><span class="s12">const</span><span class="s4"> </span><span class="s13">PLACEBO_COLOR</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'rgba(251, 146, 60, 0.8)'</span><span class="s7">;</span><span class="s4"><span class="Apple-converted-space">  </span></span><span class="s9">// Orange</span></p>
<p class="p8"><span class="s12">const</span><span class="s4"> </span><span class="s13">MAN_COLOR</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'rgba(96, 165, 250, 0.8)'</span><span class="s7">;</span><span class="s4"><span class="Apple-converted-space">      </span></span><span class="s9">// Blue</span></p>
<p class="p8"><span class="s12">const</span><span class="s4"> </span><span class="s13">WOMAN_COLOR</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'rgba(236, 72, 153, 0.8)'</span><span class="s7">;</span><span class="s4"> <span class="Apple-converted-space">  </span></span><span class="s9">// Pink</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p5"><span class="s1">// GESTIONNAIRE DE GRAPHIQUES ET AFFICHAGE</span></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p4"><span class="s12">const</span><span class="s1"> chartInstances </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> createOrUpdateChart</span><span class="s7">(</span><span class="s1">canvasId</span><span class="s7">,</span><span class="s1"> chartData</span><span class="s7">,</span><span class="s1"> chartOptions</span><span class="s7">,</span><span class="s1"> type </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'bar'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> ctx </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">canvasId</span><span class="s7">).</span><span class="s1">getContext</span><span class="s7">(</span><span class="s8">'2d'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">chartInstances</span><span class="s7">[</span><span class="s1">canvasId</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chartInstances</span><span class="s7">[</span><span class="s1">canvasId</span><span class="s7">].</span><span class="s1">data </span><span class="s7">=</span><span class="s1"> chartData</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chartInstances</span><span class="s7">[</span><span class="s1">canvasId</span><span class="s7">].</span><span class="s1">options </span><span class="s7">=</span><span class="s1"> chartOptions</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chartInstances</span><span class="s7">[</span><span class="s1">canvasId</span><span class="s7">].</span><span class="s1">update</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>chartInstances</span><span class="s7">[</span><span class="s1">canvasId</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s12">new</span><span class="s1"> </span><span class="s13">Chart</span><span class="s7">(</span><span class="s1">ctx</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> type</span><span class="s7">,</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> chartData</span><span class="s7">,</span><span class="s1"> options</span><span class="s7">:</span><span class="s1"> chartOptions </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s12">function</span><span class="s1"> showNext</span><span class="s7">(</span><span class="s1">sectionId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> section </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">sectionId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">section</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>section</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Déclenche la simulation la première fois que la section est montrée</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">section</span><span class="s7">.</span><span class="s1">hasAttribute</span><span class="s7">(</span><span class="s8">'data-simulated'</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">sectionId </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'block-randomization'</span><span class="s7">)</span><span class="s1"> simulateBlockRandomization</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">sectionId </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'population-randomization'</span><span class="s7">)</span><span class="s1"> simulatePopulationAndBlockRandomization</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">sectionId </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'stratified-randomization'</span><span class="s7">)</span><span class="s1"> simulateStratifiedRandomization</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>section</span><span class="s7">.</span><span class="s1">setAttribute</span><span class="s7">(</span><span class="s8">'data-simulated'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'true'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Timeout pour permettre à la classe d'être appliquée avant de scroller</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>setTimeout</span><span class="s7">(()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>section</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'visible-section'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>section</span><span class="s7">.</span><span class="s1">scrollIntoView</span><span class="s7">({</span><span class="s1"> behavior</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'smooth'</span><span class="s7">,</span><span class="s1"> block</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'start'</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">},</span><span class="s1"> </span><span class="s14">50</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p5"><span class="s1">// PARTIE 1 : SIMULATION DE LA RANDOMISATION SIMPLE</span></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> simulateSimpleRandomization</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> n </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'simple-n'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> groupA </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> groupB </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s14">1</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;=</span><span class="s1"> n</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s14">0.5</span><span class="s7">)</span><span class="s1"> groupA</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">i</span><span class="s7">);</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> groupB</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">i</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> imbalance </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">groupA</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> groupB</span><span class="s7">.</span><span class="s1">length</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> imbalanceColor </span><span class="s7">=</span><span class="s1"> imbalance </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'text-green-700'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'text-red-700'</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s4">getElementById</span><span class="s7">(</span><span class="s1">'simple-results-summary'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`Sur &lt;b&gt;</span><span class="s7">${</span><span class="s4">n</span><span class="s7">}</span><span class="s1">&lt;/b&gt; participants :&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>- Traité : &lt;b&gt;</span><span class="s7">${</span><span class="s4">groupA</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1">&lt;/b&gt; | Placebo : &lt;b&gt;</span><span class="s7">${</span><span class="s4">groupB</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1">&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>- &lt;b class="</span><span class="s7">${</span><span class="s4">imbalanceColor</span><span class="s7">}</span><span class="s1">"&gt;Déséquilibre : </span><span class="s7">${</span><span class="s4">imbalance</span><span class="s7">}</span><span class="s1"> participant(s).&lt;/b&gt;`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>createOrUpdateChart</span><span class="s7">(</span><span class="s8">'simpleChart'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>labels</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Traité'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Placebo'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>datasets</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">groupA</span><span class="s7">.</span><span class="s1">length</span><span class="s7">,</span><span class="s1"> groupB</span><span class="s7">.</span><span class="s1">length</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s13">TRAITE_COLOR</span><span class="s7">,</span><span class="s1"> </span><span class="s13">PLACEBO_COLOR</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">},</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>plugins</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>legend</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> display</span><span class="s7">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>datalabels</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>anchor</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>align</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>color</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#1e293b'</span><span class="s7">,</span><span class="s1"> </span><span class="s9">// slate-800</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>font</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> weight</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'bold'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>formatter</span><span class="s7">:</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">value</span><span class="s7">}</span><span class="s8">\n(</span><span class="s7">${(</span><span class="s1">value</span><span class="s7">/</span><span class="s1">n</span><span class="s7">*</span><span class="s14">100</span><span class="s7">).</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8">%)`</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>scales</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> beginAtZero</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> suggestedMax</span><span class="s7">:</span><span class="s1"> n </span><span class="s7">*</span><span class="s1"> </span><span class="s14">0.8</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p5"><span class="s1">// PARTIE 2 : SIMULATION DE LA RANDOMISATION PAR BLOCS</span></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> simulateBlockRandomization</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> n </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'block-n'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">);</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s12">let</span><span class="s4"> blockListHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'&lt;b class="block"&gt;Séquence des blocs (T=Traité, P=Placebo) :&lt;/b&gt;'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> numBlocks </span><span class="s7">=</span><span class="s1"> n </span><span class="s7">/</span><span class="s1"> </span><span class="s14">4</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> numBlocks</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> block </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'T'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'T'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'P'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'P'</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> j </span><span class="s7">=</span><span class="s1"> block</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s14">1</span><span class="s7">;</span><span class="s1"> j </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> j</span><span class="s7">--)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s12">const</span><span class="s1"> k </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s1">j </span><span class="s7">+</span><span class="s1"> </span><span class="s14">1</span><span class="s7">));</span><span class="s1"> </span><span class="s7">[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">],</span><span class="s1"> block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">]]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">],</span><span class="s1"> block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">]];</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>blockListHTML </span><span class="s7">+=</span><span class="s4"> </span><span class="s1">`&lt;span class="inline-block p-1 border bg-white rounded m-1 font-mono"&gt;</span><span class="s7">${</span><span class="s4">block</span><span class="s7">.</span><span class="s4">join</span><span class="s7">(</span><span class="s1">', '</span><span class="s7">)}</span><span class="s1">&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s4">getElementById</span><span class="s7">(</span><span class="s1">'block-results-summary'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`Sur &lt;b&gt;</span><span class="s7">${</span><span class="s4">n</span><span class="s7">}</span><span class="s1">&lt;/b&gt; participants :&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">         </span>- Traité : &lt;b&gt;</span><span class="s7">${</span><span class="s4">n</span><span class="s7">/</span><span class="s14">2</span><span class="s7">}</span><span class="s1">&lt;/b&gt; | Placebo : &lt;b&gt;</span><span class="s7">${</span><span class="s4">n</span><span class="s7">/</span><span class="s14">2</span><span class="s7">}</span><span class="s1">&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">         </span>&lt;b class="text-green-700"&gt;L'équilibre des effectifs est parfaitement maintenu.&lt;/b&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'block-list-summary'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> blockListHTML</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>createOrUpdateChart</span><span class="s7">(</span><span class="s8">'blockChart'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>labels</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Traité'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Placebo'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>datasets</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[{</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">n</span><span class="s7">/</span><span class="s14">2</span><span class="s7">,</span><span class="s1"> n</span><span class="s7">/</span><span class="s14">2</span><span class="s7">],</span><span class="s1"> backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s13">TRAITE_COLOR</span><span class="s7">,</span><span class="s1"> </span><span class="s13">PLACEBO_COLOR</span><span class="s7">]</span><span class="s1"> </span><span class="s7">}]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">},</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>plugins</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>legend</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> display</span><span class="s7">:</span><span class="s1"> </span><span class="s12">false</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>datalabels</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>anchor</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>align</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>color</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#1e293b'</span><span class="s7">,</span><span class="s1"> </span><span class="s9">// slate-800</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>font</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> weight</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'bold'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>formatter</span><span class="s7">:</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">value</span><span class="s7">}</span><span class="s8">\n(50.0%)`</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>scales</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> beginAtZero</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> suggestedMax</span><span class="s7">:</span><span class="s1"> n </span><span class="s7">*</span><span class="s1"> </span><span class="s14">0.8</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p5"><span class="s1">// PARTIE 3 : SIMULATION POPULATION ET RANDOMISATION PAR BLOCS</span></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> simulatePopulationAndBlockRandomization</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> n </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'population-n'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> sample </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Array</span><span class="s7">.</span><span class="s12">from</span><span class="s7">({</span><span class="s1"> length</span><span class="s7">:</span><span class="s1"> n </span><span class="s7">},</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s14">0.5</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'man'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'woman'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> sampleMenCount </span><span class="s7">=</span><span class="s1"> sample</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> sampleWomenCount </span><span class="s7">=</span><span class="s1"> n </span><span class="s7">-</span><span class="s1"> sampleMenCount</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'population-sample-summary'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;b&gt;1. Échantillon recruté (n=</span><span class="s7">${</span><span class="s1">n</span><span class="s7">}</span><span class="s8">) :&lt;/b&gt; &lt;b&gt;</span><span class="s7">${</span><span class="s1">sampleMenCount</span><span class="s7">}</span><span class="s8"> H&lt;/b&gt; (</span><span class="s7">${(</span><span class="s1">sampleMenCount</span><span class="s7">/</span><span class="s1">n</span><span class="s7">*</span><span class="s14">100</span><span class="s7">).</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8">%) et &lt;b&gt;</span><span class="s7">${</span><span class="s1">sampleWomenCount</span><span class="s7">}</span><span class="s8"> F&lt;/b&gt; (</span><span class="s7">${(</span><span class="s1">sampleWomenCount</span><span class="s7">/</span><span class="s1">n</span><span class="s7">*</span><span class="s14">100</span><span class="s7">).</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">1</span><span class="s7">)}</span><span class="s8">%).`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> blockAssignments </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> n </span><span class="s7">/</span><span class="s1"> </span><span class="s14">4</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> block </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'T'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'T'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'P'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'P'</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> j </span><span class="s7">=</span><span class="s1"> block</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> </span><span class="s14">1</span><span class="s7">;</span><span class="s1"> j </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> j</span><span class="s7">--)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s12">const</span><span class="s1"> k </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s1">j </span><span class="s7">+</span><span class="s1"> </span><span class="s14">1</span><span class="s7">));</span><span class="s1"> </span><span class="s7">[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">],</span><span class="s1"> block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">]]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">],</span><span class="s1"> block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">]];</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>blockAssignments</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(...</span><span class="s1">block</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> traite </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"> placebo </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">for</span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i</span><span class="s7">=</span><span class="s14">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> n</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">(</span><span class="s1">blockAssignments</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'T'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> traite </span><span class="s7">:</span><span class="s1"> placebo</span><span class="s7">).</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> sex</span><span class="s7">:</span><span class="s1"> sample</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> menInT </span><span class="s7">=</span><span class="s1"> traite</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p</span><span class="s7">.</span><span class="s1">sex </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">,</span><span class="s1"> womenInT </span><span class="s7">=</span><span class="s1"> traite</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> menInT</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> menInP </span><span class="s7">=</span><span class="s1"> placebo</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p</span><span class="s7">.</span><span class="s1">sex </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">,</span><span class="s1"> womenInP </span><span class="s7">=</span><span class="s1"> placebo</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> menInP</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s4">getElementById</span><span class="s7">(</span><span class="s1">'population-results-summary'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;b&gt;2. Répartition après randomisation par blocs :&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>- &lt;b&gt;Traité:&lt;/b&gt; </span><span class="s7">${</span><span class="s4">menInT</span><span class="s7">}</span><span class="s1"> H / </span><span class="s7">${</span><span class="s4">womenInT</span><span class="s7">}</span><span class="s1"> F | &lt;b&gt;Placebo:&lt;/b&gt; </span><span class="s7">${</span><span class="s4">menInP</span><span class="s7">}</span><span class="s1"> H / </span><span class="s7">${</span><span class="s4">womenInP</span><span class="s7">}</span><span class="s1"> F&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>&lt;b class="text-red-700"&gt;Un déséquilibre sur le sexe peut apparaître par hasard !&lt;/b&gt;`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>createOrUpdateChart</span><span class="s7">(</span><span class="s8">'populationResultChart'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>labels</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Traité'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Placebo'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>datasets</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">{</span><span class="s1"> label</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Hommes'</span><span class="s7">,</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">menInT</span><span class="s7">,</span><span class="s1"> menInP</span><span class="s7">],</span><span class="s1"> backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s13">MAN_COLOR</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">{</span><span class="s1"> label</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Femmes'</span><span class="s7">,</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">womenInT</span><span class="s7">,</span><span class="s1"> womenInP</span><span class="s7">],</span><span class="s1"> backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s13">WOMAN_COLOR</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">},</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>scales</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> x</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stacked</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stacked</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> beginAtZero</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>plugins</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>title</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> display</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Composition des groupes'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>datalabels</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>anchor</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>align</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>color</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'white'</span><span class="s7">,</span><span class="s1"> font</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> weight</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'bold'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>formatter</span><span class="s7">:</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> context</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> totalInBar </span><span class="s7">=</span><span class="s1"> context</span><span class="s7">.</span><span class="s1">chart</span><span class="s7">.</span><span class="s1">data</span><span class="s7">.</span><span class="s1">datasets</span><span class="s7">.</span><span class="s1">reduce</span><span class="s7">((</span><span class="s1">sum</span><span class="s7">,</span><span class="s1"> dataset</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> sum </span><span class="s7">+</span><span class="s1"> dataset</span><span class="s7">.</span><span class="s1">data</span><span class="s7">[</span><span class="s1">context</span><span class="s7">.</span><span class="s1">dataIndex</span><span class="s7">],</span><span class="s1"> </span><span class="s14">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> totalInBar </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">return</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">value</span><span class="s7">}</span><span class="s8">\n(</span><span class="s7">${(</span><span class="s1">value</span><span class="s7">/</span><span class="s1">totalInBar</span><span class="s7">*</span><span class="s14">100</span><span class="s7">).</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">0</span><span class="s7">)}</span><span class="s8">%)`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p5"><span class="s1">// PARTIE 4 : SIMULATION DE LA RANDOMISATION STRATIFIÉE</span></p>
<p class="p5"><span class="s1">// ===================================================================================</span></p>
<p class="p4"><span class="s12">function</span><span class="s1"> simulateStratifiedRandomization</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> n </span><span class="s7">=</span><span class="s1"> parseInt</span><span class="s7">(</span><span class="s1">document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'stratified-n'</span><span class="s7">).</span><span class="s1">value</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> sample </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Array</span><span class="s7">.</span><span class="s12">from</span><span class="s7">({</span><span class="s1"> length</span><span class="s7">:</span><span class="s1"> n </span><span class="s7">},</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s14">0.5</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'man'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">'woman'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> men </span><span class="s7">=</span><span class="s1"> sample</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">),</span><span class="s1"> women </span><span class="s7">=</span><span class="s1"> sample</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'woman'</span><span class="s7">);</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s4">getElementById</span><span class="s7">(</span><span class="s1">'stratified-sample-summary'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;b&gt;Échantillon (n=</span><span class="s7">${</span><span class="s4">n</span><span class="s7">}</span><span class="s1">):&lt;/b&gt; </span><span class="s7">${</span><span class="s4">men</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1"> H et </span><span class="s7">${</span><span class="s4">women</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1"> F. On crée deux strates.`</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> randomizeStratum </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">stratum</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> assignments </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span><span class="s1"> </span><span class="s12">const</span><span class="s1"> numBlocks </span><span class="s7">=</span><span class="s1"> </span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s1">stratum</span><span class="s7">.</span><span class="s1">length </span><span class="s7">/</span><span class="s1"> </span><span class="s14">4</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">for</span><span class="s1"> </span><span class="s7">(</span><span class="s12">let</span><span class="s1"> i </span><span class="s7">=</span><span class="s1"> </span><span class="s14">0</span><span class="s7">;</span><span class="s1"> i </span><span class="s7">&lt;</span><span class="s1"> numBlocks</span><span class="s7">;</span><span class="s1"> i</span><span class="s7">++)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s12">let</span><span class="s1"> block </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'T'</span><span class="s7">,</span><span class="s8">'T'</span><span class="s7">,</span><span class="s8">'P'</span><span class="s7">,</span><span class="s8">'P'</span><span class="s7">];</span><span class="s1"> </span><span class="s12">for</span><span class="s7">(</span><span class="s12">let</span><span class="s1"> j</span><span class="s7">=</span><span class="s1">block</span><span class="s7">.</span><span class="s1">length</span><span class="s7">-</span><span class="s14">1</span><span class="s7">;</span><span class="s1">j</span><span class="s7">&gt;</span><span class="s14">0</span><span class="s7">;</span><span class="s1">j</span><span class="s7">--){</span><span class="s12">const</span><span class="s1"> k</span><span class="s7">=</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()*(</span><span class="s1">j</span><span class="s7">+</span><span class="s14">1</span><span class="s7">));[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">],</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">]]=[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">],</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">]];}</span><span class="s1"> assignments</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(...</span><span class="s1">block</span><span class="s7">);</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> remaining </span><span class="s7">=</span><span class="s1"> stratum</span><span class="s7">.</span><span class="s1">length </span><span class="s7">%</span><span class="s1"> </span><span class="s14">4</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">remaining </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s12">let</span><span class="s1"> block </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'T'</span><span class="s7">,</span><span class="s8">'T'</span><span class="s7">,</span><span class="s8">'P'</span><span class="s7">,</span><span class="s8">'P'</span><span class="s7">];</span><span class="s1"> </span><span class="s12">for</span><span class="s7">(</span><span class="s12">let</span><span class="s1"> j</span><span class="s7">=</span><span class="s1">block</span><span class="s7">.</span><span class="s1">length</span><span class="s7">-</span><span class="s14">1</span><span class="s7">;</span><span class="s1">j</span><span class="s7">&gt;</span><span class="s14">0</span><span class="s7">;</span><span class="s1">j</span><span class="s7">--){</span><span class="s12">const</span><span class="s1"> k</span><span class="s7">=</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">floor</span><span class="s7">(</span><span class="s13">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()*(</span><span class="s1">j</span><span class="s7">+</span><span class="s14">1</span><span class="s7">));[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">],</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">]]=[</span><span class="s1">block</span><span class="s7">[</span><span class="s1">k</span><span class="s7">],</span><span class="s1">block</span><span class="s7">[</span><span class="s1">j</span><span class="s7">]];}</span><span class="s1"> assignments</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(...</span><span class="s1">block</span><span class="s7">.</span><span class="s1">slice</span><span class="s7">(</span><span class="s14">0</span><span class="s7">,</span><span class="s1"> remaining</span><span class="s7">));</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">return</span><span class="s1"> assignments</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> menAssignments </span><span class="s7">=</span><span class="s1"> randomizeStratum</span><span class="s7">(</span><span class="s1">men</span><span class="s7">),</span><span class="s1"> womenAssignments </span><span class="s7">=</span><span class="s1"> randomizeStratum</span><span class="s7">(</span><span class="s1">women</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'stratified-men-summary'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;b&gt;Strate Hommes (</span><span class="s7">${</span><span class="s1">men</span><span class="s7">.</span><span class="s1">length</span><span class="s7">}</span><span class="s8">) :&lt;/b&gt; </span><span class="s7">${</span><span class="s1">menAssignments</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p</span><span class="s7">=&gt;</span><span class="s1">p</span><span class="s7">===</span><span class="s8">'T'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">}</span><span class="s8"> T / </span><span class="s7">${</span><span class="s1">menAssignments</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p</span><span class="s7">=&gt;</span><span class="s1">p</span><span class="s7">===</span><span class="s8">'P'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">}</span><span class="s8"> P.`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'stratified-women-summary'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;b&gt;Strate Femmes (</span><span class="s7">${</span><span class="s1">women</span><span class="s7">.</span><span class="s1">length</span><span class="s7">}</span><span class="s8">) :&lt;/b&gt; </span><span class="s7">${</span><span class="s1">womenAssignments</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p</span><span class="s7">=&gt;</span><span class="s1">p</span><span class="s7">===</span><span class="s8">'T'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">}</span><span class="s8"> T / </span><span class="s7">${</span><span class="s1">womenAssignments</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p</span><span class="s7">=&gt;</span><span class="s1">p</span><span class="s7">===</span><span class="s8">'P'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">}</span><span class="s8"> P.`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> traite </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"> placebo </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>men</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">p</span><span class="s7">,</span><span class="s1"> i</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">(</span><span class="s1">menAssignments</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'T'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> traite </span><span class="s7">:</span><span class="s1"> placebo</span><span class="s7">).</span><span class="s1">push</span><span class="s7">({</span><span class="s1">sex</span><span class="s7">:</span><span class="s1"> p</span><span class="s7">});</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>women</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">((</span><span class="s1">p</span><span class="s7">,</span><span class="s1"> i</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s7">(</span><span class="s1">womenAssignments</span><span class="s7">[</span><span class="s1">i</span><span class="s7">]</span><span class="s1"> </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'T'</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> traite </span><span class="s7">:</span><span class="s1"> placebo</span><span class="s7">).</span><span class="s1">push</span><span class="s7">({</span><span class="s1">sex</span><span class="s7">:</span><span class="s1"> p</span><span class="s7">});</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> menInT </span><span class="s7">=</span><span class="s1"> traite</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p</span><span class="s7">.</span><span class="s1">sex </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">,</span><span class="s1"> womenInT </span><span class="s7">=</span><span class="s1"> traite</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> menInT</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s12">const</span><span class="s1"> menInP </span><span class="s7">=</span><span class="s1"> placebo</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">p </span><span class="s7">=&gt;</span><span class="s1"> p</span><span class="s7">.</span><span class="s1">sex </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'man'</span><span class="s7">).</span><span class="s1">length</span><span class="s7">,</span><span class="s1"> womenInP </span><span class="s7">=</span><span class="s1"> placebo</span><span class="s7">.</span><span class="s1">length </span><span class="s7">-</span><span class="s1"> menInP</span><span class="s7">;</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">    </span>document</span><span class="s7">.</span><span class="s4">getElementById</span><span class="s7">(</span><span class="s1">'stratified-results-summary'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;b&gt;Résultat final :&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>- &lt;b&gt;Traité (</span><span class="s7">${</span><span class="s4">traite</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1">):&lt;/b&gt; </span><span class="s7">${</span><span class="s4">menInT</span><span class="s7">}</span><span class="s1"> H / </span><span class="s7">${</span><span class="s4">womenInT</span><span class="s7">}</span><span class="s1"> F | &lt;b&gt;Placebo (</span><span class="s7">${</span><span class="s4">placebo</span><span class="s7">.</span><span class="s4">length</span><span class="s7">}</span><span class="s1">):&lt;/b&gt; </span><span class="s7">${</span><span class="s4">menInP</span><span class="s7">}</span><span class="s1"> H / </span><span class="s7">${</span><span class="s4">womenInP</span><span class="s7">}</span><span class="s1"> F&lt;br&gt;</span></p>
<p class="p8"><span class="s1"><span class="Apple-converted-space">        </span>&lt;b class="text-green-700"&gt;La stratification a prévenu le déséquilibre sur le sexe !&lt;/b&gt;`</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>createOrUpdateChart</span><span class="s7">(</span><span class="s8">'stratifiedResultChart'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p8"><span class="s4"><span class="Apple-converted-space">        </span>labels</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Traité'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Placebo'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>datasets</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">{</span><span class="s1"> label</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Hommes'</span><span class="s7">,</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">menInT</span><span class="s7">,</span><span class="s1"> menInP</span><span class="s7">],</span><span class="s1"> backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s13">MAN_COLOR</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">{</span><span class="s1"> label</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Femmes'</span><span class="s7">,</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s1">womenInT</span><span class="s7">,</span><span class="s1"> womenInP</span><span class="s7">],</span><span class="s1"> backgroundColor</span><span class="s7">:</span><span class="s1"> </span><span class="s13">WOMAN_COLOR</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">]</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">},</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>scales</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> x</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stacked</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">},</span><span class="s1"> y</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> stacked</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> beginAtZero</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>plugins</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>title</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> display</span><span class="s7">:</span><span class="s1"> </span><span class="s12">true</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'Composition des groupes'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">             </span>datalabels</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>anchor</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>align</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>color</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'white'</span><span class="s7">,</span><span class="s1"> font</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> weight</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'bold'</span><span class="s1"> </span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>formatter</span><span class="s7">:</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value</span><span class="s7">,</span><span class="s1"> context</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">const</span><span class="s1"> totalInBar </span><span class="s7">=</span><span class="s1"> context</span><span class="s7">.</span><span class="s1">chart</span><span class="s7">.</span><span class="s1">data</span><span class="s7">.</span><span class="s1">datasets</span><span class="s7">.</span><span class="s1">reduce</span><span class="s7">((</span><span class="s1">sum</span><span class="s7">,</span><span class="s1"> dataset</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> sum </span><span class="s7">+</span><span class="s1"> dataset</span><span class="s7">.</span><span class="s1">data</span><span class="s7">[</span><span class="s1">context</span><span class="s7">.</span><span class="s1">dataIndex</span><span class="s7">],</span><span class="s1"> </span><span class="s14">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">value </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> totalInBar </span><span class="s7">===</span><span class="s1"> </span><span class="s14">0</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">return</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">value</span><span class="s7">}</span><span class="s8">\n(</span><span class="s7">${(</span><span class="s1">value</span><span class="s7">/</span><span class="s1">totalInBar</span><span class="s7">*</span><span class="s14">100</span><span class="s7">).</span><span class="s1">toFixed</span><span class="s7">(</span><span class="s14">0</span><span class="s7">)}</span><span class="s8">%)`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s7">});</span></p>
<p class="p9"><span class="s1">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s1">// Lancer la première simulation au chargement de la page</span></p>
<p class="p4"><span class="s1">window</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span>simulateSimpleRandomization</span><span class="s7">();</span></p>
<p class="p9"><span class="s1">};</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
</body>
</html>
