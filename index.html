<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="fr"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1">    &lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;title&gt;Apprentissage de la Lecture Critique : La Randomisation&lt;/title&gt;</span></p>
<p class="p1"><span class="s1">    &lt;link rel="preconnect" href="https://fonts.googleapis.com"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;link rel="preconnect" href="https://fonts.gstatic.com" crossorigin&gt;</span></p>
<p class="p1"><span class="s1">    &lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;family=Roboto+Slab:wght@400;700&amp;display=swap" rel="stylesheet"&gt;</span></p>
<p class="p1"><span class="s1">    &lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">    &lt;!-- Ajout de Chart.js et du plugin pour les labels --&gt;</span></p>
<p class="p1"><span class="s1">    &lt;script src="https://cdn.jsdelivr.net/npm/chart.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">    &lt;script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">    &lt;style&gt;</span></p>
<p class="p1"><span class="s1">        body {</span></p>
<p class="p1"><span class="s1">            font-family: 'Inter', sans-serif;</span></p>
<p class="p1"><span class="s1">            background-color: #f8fafc; /* slate-50 */</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">        h1, h2, h3 {</span></p>
<p class="p1"><span class="s1">            font-family: 'Roboto Slab', serif;</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">        /* Animation pour l'apparition des sections */</span></p>
<p class="p1"><span class="s1">        .hidden-section {</span></p>
<p class="p1"><span class="s1">            opacity: 0;</span></p>
<p class="p1"><span class="s1">            transform: translateY(20px);</span></p>
<p class="p1"><span class="s1">            transition: opacity 0.5s ease-out, transform 0.5s ease-out;</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">        .visible-section {</span></p>
<p class="p1"><span class="s1">            opacity: 1;</span></p>
<p class="p1"><span class="s1">            transform: translateY(0);</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">    &lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body class="bg-slate-50 text-slate-800"&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    &lt;header class="bg-white shadow-md"&gt;</span></p>
<p class="p1"><span class="s1">        &lt;div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center"&gt;</span></p>
<p class="p1"><span class="s1">            &lt;h1 class="text-4xl font-bold text-slate-900"&gt;Apprendre la Lecture Critique d'Article&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1">            &lt;p class="mt-2 text-xl text-slate-600"&gt;Module Interactif sur la Randomisation&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">        &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/header&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    &lt;main class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 space-y-12"&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- PARTIE 1 : RANDOMISATION SIMPLE --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;section id="simple-randomization" class="bg-white p-6 rounded-lg shadow-lg"&gt;</span></p>
<p class="p1"><span class="s1">            &lt;h2 class="text-2xl font-bold text-cyan-700 border-b-2 border-cyan-100 pb-2"&gt;1. Randomisation Simple&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1">            &lt;p class="mt-4 text-slate-600"&gt;Chaque participant a une chance égale (50%) d'être assigné au groupe "Traité" ou "Placebo". Par pur hasard, cette méthode peut conduire à des déséquilibres importants dans la taille des groupes.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;label for="simple-n" class="font-bold"&gt;Nombre de participants :&lt;/label&gt;</span></p>
<p class="p1"><span class="s1">                &lt;input type="number" id="simple-n" value="30" min="10" max="500" class="w-24 p-2 border border-slate-300 rounded-md"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="simulateSimpleRandomization()" class="px-4 py-2 bg-cyan-600 text-white font-semibold rounded-md hover:bg-cyan-700 transition"&gt;Lancer la simulation&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div id="simple-results-summary" class="p-4 bg-cyan-50 border border-cyan-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div class="bg-slate-50 p-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;h3 class="text-lg font-bold text-center mb-2"&gt;Visualisation des Effectifs&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;canvas id="simpleChart"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1">                &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-8 text-right"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="showNext('block-randomization')" class="px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"&gt;Passer à l'exercice suivant →&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">        &lt;/section&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- PARTIE 2 : RANDOMISATION PAR BLOCS (initialement cachée) --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;section id="block-randomization" class="bg-white p-6 rounded-lg shadow-lg hidden hidden-section"&gt;</span></p>
<p class="p1"><span class="s1">            &lt;h2 class="text-2xl font-bold text-green-700 border-b-2 border-green-100 pb-2"&gt;2. Randomisation par Blocs&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1">            &lt;p class="mt-4 text-slate-600"&gt;La randomisation par blocs garantit un équilibre régulier de la taille des groupes en randomisant par "blocs" de taille fixe (ici, 4), où chaque bloc contient 2 "Traité" et 2 "Placebo".&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;label for="block-n" class="font-bold"&gt;Nb. de participants (multiple de 4) :&lt;/label&gt;</span></p>
<p class="p1"><span class="s1">                &lt;input type="number" id="block-n" value="32" min="8" max="500" step="4" class="w-24 p-2 border border-slate-300 rounded-md"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="simulateBlockRandomization()" class="px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition"&gt;Lancer la simulation&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6"&gt;</span></p>
<p class="p1"><span class="s1">                 &lt;div id="block-list-summary" class="mb-4 p-4 bg-slate-100 rounded-md text-sm"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                 &lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div id="block-results-summary" class="p-4 bg-green-50 border border-green-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div class="bg-slate-50 p-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;h3 class="text-lg font-bold text-center mb-2"&gt;Visualisation des Effectifs&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;canvas id="blockChart"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-8 text-right"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="showNext('population-randomization')" class="px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"&gt;Passer à l'exercice suivant →&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">        &lt;/section&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- PARTIE 3 : RANDOMISATION &amp; FACTEURS PRONOSTIQUES (initialement cachée) --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;section id="population-randomization" class="bg-white p-6 rounded-lg shadow-lg hidden hidden-section"&gt;</span></p>
<p class="p1"><span class="s1">            &lt;h2 class="text-2xl font-bold text-amber-700 border-b-2 border-amber-100 pb-2"&gt;3. Blocs &amp; Facteurs Pronostiques&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1">            &lt;p class="mt-4 text-slate-600"&gt;Même avec des effectifs équilibrés, un déséquilibre peut survenir sur des facteurs importants (ex: le sexe). Une randomisation par blocs simple ne garantit PAS que les proportions H/F seront égales dans les groupes finaux.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;label for="population-n" class="font-bold"&gt;Taille de l'échantillon (multiple de 4) :&lt;/label&gt;</span></p>
<p class="p1"><span class="s1">                &lt;input type="number" id="population-n" value="40" min="12" max="500" step="4" class="w-24 p-2 border border-slate-300 rounded-md"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="simulatePopulationAndBlockRandomization()" class="px-4 py-2 bg-amber-600 text-white font-semibold rounded-md hover:bg-amber-700 transition"&gt;Lancer la simulation&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 space-y-4"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div id="population-sample-summary" class="p-4 bg-amber-50 border border-amber-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div id="population-results-summary" class="p-4 bg-amber-50 border border-amber-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div class="bg-slate-50 p-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;h3 class="text-lg font-bold text-center mb-2"&gt;Répartition H/F dans les Groupes&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;canvas id="populationResultChart"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-8 text-right"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="showNext('stratified-randomization')" class="px-5 py-2 bg-slate-700 text-white font-semibold rounded-md hover:bg-slate-800 transition"&gt;Passer à l'exercice suivant →&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">        &lt;/section&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- PARTIE 4 : RANDOMISATION STRATIFIÉE (initialement cachée) --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;!-- =================================================================================== --&gt;</span></p>
<p class="p1"><span class="s1">        &lt;section id="stratified-randomization" class="bg-white p-6 rounded-lg shadow-lg hidden hidden-section"&gt;</span></p>
<p class="p1"><span class="s1">            &lt;h2 class="text-2xl font-bold text-pink-700 border-b-2 border-pink-100 pb-2"&gt;4. Randomisation Stratifiée&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1">            &lt;p class="mt-4 text-slate-600"&gt;Pour garantir l'équilibre d'un facteur, on applique une randomisation par blocs &lt;b&gt;séparément dans chaque strate&lt;/b&gt; (hommes et femmes). Cela garantit un équilibre quasi-parfait du facteur entre les groupes.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">             &lt;div class="mt-6 p-4 bg-slate-100 rounded-md flex items-center gap-4 flex-wrap"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;label for="stratified-n" class="font-bold"&gt;Taille de l'échantillon :&lt;/label&gt;</span></p>
<p class="p1"><span class="s1">                &lt;input type="number" id="stratified-n" value="40" min="12" max="500" class="w-24 p-2 border border-slate-300 rounded-md"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;button onclick="simulateStratifiedRandomization()" class="px-4 py-2 bg-pink-600 text-white font-semibold rounded-md hover:bg-pink-700 transition"&gt;Lancer la simulation&lt;/button&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;div class="mt-6 space-y-4"&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div id="stratified-sample-summary" class="p-4 bg-pink-50 border border-pink-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div id="stratified-men-summary" class="p-2 bg-slate-100 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div id="stratified-women-summary" class="p-2 bg-slate-100 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                 &lt;div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-center"&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div id="stratified-results-summary" class="p-4 bg-pink-50 border border-pink-200 rounded-md"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;div class="bg-slate-50 p-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;h3 class="text-lg font-bold text-center mb-2"&gt;Répartition H/F dans les Groupes&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1">                        &lt;canvas id="stratifiedResultChart"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1">                    &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">                &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">            &lt;/div&gt;</span></p>
<p class="p1"><span class="s1">        &lt;/section&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/main&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    &lt;footer class="text-center py-6 text-slate-500 text-sm"&gt;</span></p>
<p class="p1"><span class="s1">        &lt;p&gt;Créé pour l'apprentissage de la lecture critique.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1">    &lt;/footer&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">&lt;script&gt;</span></p>
<p class="p1"><span class="s1">// Enregistrer le plugin de datalabels globalement</span></p>
<p class="p1"><span class="s1">Chart.register(ChartDataLabels);</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// Couleurs</span></p>
<p class="p1"><span class="s1">const TRAITE_COLOR = 'rgba(34, 211, 238, 0.8)';   // Cyan</span></p>
<p class="p1"><span class="s1">const PLACEBO_COLOR = 'rgba(251, 146, 60, 0.8)';  // Orange</span></p>
<p class="p1"><span class="s1">const MAN_COLOR = 'rgba(96, 165, 250, 0.8)';      // Blue</span></p>
<p class="p1"><span class="s1">const WOMAN_COLOR = 'rgba(236, 72, 153, 0.8)';   // Pink</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">// GESTIONNAIRE DE GRAPHIQUES ET AFFICHAGE</span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">const chartInstances = {};</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">function createOrUpdateChart(canvasId, chartData, chartOptions, type = 'bar') {</span></p>
<p class="p1"><span class="s1">    const ctx = document.getElementById(canvasId).getContext('2d');</span></p>
<p class="p1"><span class="s1">    if (chartInstances[canvasId]) {</span></p>
<p class="p1"><span class="s1">        chartInstances[canvasId].data = chartData;</span></p>
<p class="p1"><span class="s1">        chartInstances[canvasId].options = chartOptions;</span></p>
<p class="p1"><span class="s1">        chartInstances[canvasId].update();</span></p>
<p class="p1"><span class="s1">    } else {</span></p>
<p class="p1"><span class="s1">        chartInstances[canvasId] = new Chart(ctx, { type, data: chartData, options: chartOptions });</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">function showNext(sectionId) {</span></p>
<p class="p1"><span class="s1">    const section = document.getElementById(sectionId);</span></p>
<p class="p1"><span class="s1">    if (section) {</span></p>
<p class="p1"><span class="s1">        section.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1">        // Déclenche la simulation la première fois que la section est montrée</span></p>
<p class="p1"><span class="s1">        if (!section.hasAttribute('data-simulated')) {</span></p>
<p class="p1"><span class="s1">            if (sectionId === 'block-randomization') simulateBlockRandomization();</span></p>
<p class="p1"><span class="s1">            if (sectionId === 'population-randomization') simulatePopulationAndBlockRandomization();</span></p>
<p class="p1"><span class="s1">            if (sectionId === 'stratified-randomization') simulateStratifiedRandomization();</span></p>
<p class="p1"><span class="s1">            section.setAttribute('data-simulated', 'true');</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">        // Timeout pour permettre à la classe d'être appliquée avant de scroller</span></p>
<p class="p1"><span class="s1">        setTimeout(() =&gt; {</span></p>
<p class="p1"><span class="s1">            section.classList.add('visible-section');</span></p>
<p class="p1"><span class="s1">            section.scrollIntoView({ behavior: 'smooth', block: 'start' });</span></p>
<p class="p1"><span class="s1">        }, 50);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">// PARTIE 1 : SIMULATION DE LA RANDOMISATION SIMPLE</span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">function simulateSimpleRandomization() {</span></p>
<p class="p1"><span class="s1">    const n = parseInt(document.getElementById('simple-n').value);</span></p>
<p class="p1"><span class="s1">    const groupA = [];</span></p>
<p class="p1"><span class="s1">    const groupB = [];</span></p>
<p class="p1"><span class="s1">    for (let i = 1; i &lt;= n; i++) {</span></p>
<p class="p1"><span class="s1">        if (Math.random() &lt; 0.5) groupA.push(i); else groupB.push(i);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">    const imbalance = Math.abs(groupA.length - groupB.length);</span></p>
<p class="p1"><span class="s1">    const imbalanceColor = imbalance === 0 ? 'text-green-700' : 'text-red-700';</span></p>
<p class="p1"><span class="s1">    document.getElementById('simple-results-summary').innerHTML = `Sur &lt;b&gt;${n}&lt;/b&gt; participants :&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        - Traité : &lt;b&gt;${groupA.length}&lt;/b&gt; | Placebo : &lt;b&gt;${groupB.length}&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        - &lt;b class="${imbalanceColor}"&gt;Déséquilibre : ${imbalance} participant(s).&lt;/b&gt;`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    createOrUpdateChart('simpleChart', {</span></p>
<p class="p1"><span class="s1">        labels: ['Traité', 'Placebo'],</span></p>
<p class="p1"><span class="s1">        datasets: [{</span></p>
<p class="p1"><span class="s1">            data: [groupA.length, groupB.length],</span></p>
<p class="p1"><span class="s1">            backgroundColor: [TRAITE_COLOR, PLACEBO_COLOR],</span></p>
<p class="p1"><span class="s1">        }]</span></p>
<p class="p1"><span class="s1">    }, {</span></p>
<p class="p1"><span class="s1">        plugins: {</span></p>
<p class="p1"><span class="s1">            legend: { display: false },</span></p>
<p class="p1"><span class="s1">            datalabels: {</span></p>
<p class="p1"><span class="s1">                anchor: 'center',</span></p>
<p class="p1"><span class="s1">                align: 'center',</span></p>
<p class="p1"><span class="s1">                color: '#1e293b', // slate-800</span></p>
<p class="p1"><span class="s1">                font: { weight: 'bold' },</span></p>
<p class="p1"><span class="s1">                formatter: (value) =&gt; `${value}\n(${(value/n*100).toFixed(1)}%)`</span></p>
<p class="p1"><span class="s1">            }</span></p>
<p class="p1"><span class="s1">        },</span></p>
<p class="p1"><span class="s1">        scales: { y: { beginAtZero: true, suggestedMax: n * 0.8 } }</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">// PARTIE 2 : SIMULATION DE LA RANDOMISATION PAR BLOCS</span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">function simulateBlockRandomization() {</span></p>
<p class="p1"><span class="s1">    const n = parseInt(document.getElementById('block-n').value);</span></p>
<p class="p1"><span class="s1">    let blockListHTML = '&lt;b class="block"&gt;Séquence des blocs (T=Traité, P=Placebo) :&lt;/b&gt;';</span></p>
<p class="p1"><span class="s1">    const numBlocks = n / 4;</span></p>
<p class="p1"><span class="s1">    for (let i = 0; i &lt; numBlocks; i++) {</span></p>
<p class="p1"><span class="s1">        let block = ['T', 'T', 'P', 'P'];</span></p>
<p class="p1"><span class="s1">        for (let j = block.length - 1; j &gt; 0; j--) { const k = Math.floor(Math.random() * (j + 1)); [block[j], block[k]] = [block[k], block[j]]; }</span></p>
<p class="p1"><span class="s1">        blockListHTML += `&lt;span class="inline-block p-1 border bg-white rounded m-1 font-mono"&gt;${block.join(', ')}&lt;/span&gt;`;</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    document.getElementById('block-results-summary').innerHTML = `Sur &lt;b&gt;${n}&lt;/b&gt; participants :&lt;br&gt;</span></p>
<p class="p1"><span class="s1">         - Traité : &lt;b&gt;${n/2}&lt;/b&gt; | Placebo : &lt;b&gt;${n/2}&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p1"><span class="s1">         &lt;b class="text-green-700"&gt;L'équilibre des effectifs est parfaitement maintenu.&lt;/b&gt;`;</span></p>
<p class="p1"><span class="s1">    document.getElementById('block-list-summary').innerHTML = blockListHTML;</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    createOrUpdateChart('blockChart', {</span></p>
<p class="p1"><span class="s1">        labels: ['Traité', 'Placebo'],</span></p>
<p class="p1"><span class="s1">        datasets: [{ data: [n/2, n/2], backgroundColor: [TRAITE_COLOR, PLACEBO_COLOR] }]</span></p>
<p class="p1"><span class="s1">    }, {</span></p>
<p class="p1"><span class="s1">        plugins: {</span></p>
<p class="p1"><span class="s1">            legend: { display: false },</span></p>
<p class="p1"><span class="s1">            datalabels: {</span></p>
<p class="p1"><span class="s1">                anchor: 'center',</span></p>
<p class="p1"><span class="s1">                align: 'center',</span></p>
<p class="p1"><span class="s1">                color: '#1e293b', // slate-800</span></p>
<p class="p1"><span class="s1">                font: { weight: 'bold' },</span></p>
<p class="p1"><span class="s1">                formatter: (value) =&gt; `${value}\n(50.0%)`</span></p>
<p class="p1"><span class="s1">            }</span></p>
<p class="p1"><span class="s1">        },</span></p>
<p class="p1"><span class="s1">        scales: { y: { beginAtZero: true, suggestedMax: n * 0.8 } }</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">// PARTIE 3 : SIMULATION POPULATION ET RANDOMISATION PAR BLOCS</span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">function simulatePopulationAndBlockRandomization() {</span></p>
<p class="p1"><span class="s1">    const n = parseInt(document.getElementById('population-n').value);</span></p>
<p class="p1"><span class="s1">    const sample = Array.from({ length: n }, () =&gt; Math.random() &lt; 0.5 ? 'man' : 'woman');</span></p>
<p class="p1"><span class="s1">    const sampleMenCount = sample.filter(p =&gt; p === 'man').length;</span></p>
<p class="p1"><span class="s1">    const sampleWomenCount = n - sampleMenCount;</span></p>
<p class="p1"><span class="s1">    document.getElementById('population-sample-summary').innerHTML = `&lt;b&gt;1. Échantillon recruté (n=${n}) :&lt;/b&gt; &lt;b&gt;${sampleMenCount} H&lt;/b&gt; (${(sampleMenCount/n*100).toFixed(1)}%) et &lt;b&gt;${sampleWomenCount} F&lt;/b&gt; (${(sampleWomenCount/n*100).toFixed(1)}%).`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    const blockAssignments = [];</span></p>
<p class="p1"><span class="s1">    for (let i = 0; i &lt; n / 4; i++) {</span></p>
<p class="p1"><span class="s1">        let block = ['T', 'T', 'P', 'P'];</span></p>
<p class="p1"><span class="s1">        for (let j = block.length - 1; j &gt; 0; j--) { const k = Math.floor(Math.random() * (j + 1)); [block[j], block[k]] = [block[k], block[j]]; }</span></p>
<p class="p1"><span class="s1">        blockAssignments.push(...block);</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    const traite = [], placebo = [];</span></p>
<p class="p1"><span class="s1">    for(let i=0; i &lt; n; i++) {</span></p>
<p class="p1"><span class="s1">        (blockAssignments[i] === 'T' ? traite : placebo).push({ sex: sample[i] });</span></p>
<p class="p1"><span class="s1">    }</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    const menInT = traite.filter(p =&gt; p.sex === 'man').length, womenInT = traite.length - menInT;</span></p>
<p class="p1"><span class="s1">    const menInP = placebo.filter(p =&gt; p.sex === 'man').length, womenInP = placebo.length - menInP;</span></p>
<p class="p1"><span class="s1">    document.getElementById('population-results-summary').innerHTML = `&lt;b&gt;2. Répartition après randomisation par blocs :&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        - &lt;b&gt;Traité:&lt;/b&gt; ${menInT} H / ${womenInT} F | &lt;b&gt;Placebo:&lt;/b&gt; ${menInP} H / ${womenInP} F&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        &lt;b class="text-red-700"&gt;Un déséquilibre sur le sexe peut apparaître par hasard !&lt;/b&gt;`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    createOrUpdateChart('populationResultChart', {</span></p>
<p class="p1"><span class="s1">        labels: ['Traité', 'Placebo'],</span></p>
<p class="p1"><span class="s1">        datasets: [</span></p>
<p class="p1"><span class="s1">            { label: 'Hommes', data: [menInT, menInP], backgroundColor: MAN_COLOR },</span></p>
<p class="p1"><span class="s1">            { label: 'Femmes', data: [womenInT, womenInP], backgroundColor: WOMAN_COLOR }</span></p>
<p class="p1"><span class="s1">        ]</span></p>
<p class="p1"><span class="s1">    }, {</span></p>
<p class="p1"><span class="s1">        scales: { x: { stacked: true }, y: { stacked: true, beginAtZero: true } },</span></p>
<p class="p1"><span class="s1">        plugins: {</span></p>
<p class="p1"><span class="s1">            title: { display: true, text: 'Composition des groupes' },</span></p>
<p class="p1"><span class="s1">            datalabels: {</span></p>
<p class="p1"><span class="s1">                anchor: 'center',</span></p>
<p class="p1"><span class="s1">                align: 'center',</span></p>
<p class="p1"><span class="s1">                color: 'white', font: { weight: 'bold' },</span></p>
<p class="p1"><span class="s1">                formatter: (value, context) =&gt; {</span></p>
<p class="p1"><span class="s1">                    const totalInBar = context.chart.data.datasets.reduce((sum, dataset) =&gt; sum + dataset.data[context.dataIndex], 0);</span></p>
<p class="p1"><span class="s1">                    if (value === 0 || totalInBar === 0) return '';</span></p>
<p class="p1"><span class="s1">                    return `${value}\n(${(value/totalInBar*100).toFixed(0)}%)`;</span></p>
<p class="p1"><span class="s1">                }</span></p>
<p class="p1"><span class="s1">            }</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">// PARTIE 4 : SIMULATION DE LA RANDOMISATION STRATIFIÉE</span></p>
<p class="p1"><span class="s1">// ===================================================================================</span></p>
<p class="p1"><span class="s1">function simulateStratifiedRandomization() {</span></p>
<p class="p1"><span class="s1">    const n = parseInt(document.getElementById('stratified-n').value);</span></p>
<p class="p1"><span class="s1">    const sample = Array.from({ length: n }, () =&gt; Math.random() &lt; 0.5 ? 'man' : 'woman');</span></p>
<p class="p1"><span class="s1">    const men = sample.filter(p =&gt; p === 'man'), women = sample.filter(p =&gt; p === 'woman');</span></p>
<p class="p1"><span class="s1">    document.getElementById('stratified-sample-summary').innerHTML = `&lt;b&gt;Échantillon (n=${n}):&lt;/b&gt; ${men.length} H et ${women.length} F. On crée deux strates.`;</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    const randomizeStratum = (stratum) =&gt; {</span></p>
<p class="p1"><span class="s1">        const assignments = []; const numBlocks = Math.floor(stratum.length / 4);</span></p>
<p class="p1"><span class="s1">        for (let i = 0; i &lt; numBlocks; i++) { let block = ['T','T','P','P']; for(let j=block.length-1;j&gt;0;j--){const k=Math.floor(Math.random()*(j+1));[block[j],block[k]]=[block[k],block[j]];} assignments.push(...block); }</span></p>
<p class="p1"><span class="s1">        const remaining = stratum.length % 4;</span></p>
<p class="p1"><span class="s1">        if (remaining &gt; 0) { let block = ['T','T','P','P']; for(let j=block.length-1;j&gt;0;j--){const k=Math.floor(Math.random()*(j+1));[block[j],block[k]]=[block[k],block[j]];} assignments.push(...block.slice(0, remaining)); }</span></p>
<p class="p1"><span class="s1">        return assignments;</span></p>
<p class="p1"><span class="s1">    };</span></p>
<p class="p1"><span class="s1">   <span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1">    const menAssignments = randomizeStratum(men), womenAssignments = randomizeStratum(women);</span></p>
<p class="p1"><span class="s1">    document.getElementById('stratified-men-summary').innerHTML = `&lt;b&gt;Strate Hommes (${men.length}) :&lt;/b&gt; ${menAssignments.filter(p=&gt;p==='T').length} T / ${menAssignments.filter(p=&gt;p==='P').length} P.`;</span></p>
<p class="p1"><span class="s1">    document.getElementById('stratified-women-summary').innerHTML = `&lt;b&gt;Strate Femmes (${women.length}) :&lt;/b&gt; ${womenAssignments.filter(p=&gt;p==='T').length} T / ${womenAssignments.filter(p=&gt;p==='P').length} P.`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    const traite = [], placebo = [];</span></p>
<p class="p1"><span class="s1">    men.forEach((p, i) =&gt; { (menAssignments[i] === 'T' ? traite : placebo).push({sex: p}); });</span></p>
<p class="p1"><span class="s1">    women.forEach((p, i) =&gt; { (womenAssignments[i] === 'T' ? traite : placebo).push({sex: p}); });</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    const menInT = traite.filter(p =&gt; p.sex === 'man').length, womenInT = traite.length - menInT;</span></p>
<p class="p1"><span class="s1">    const menInP = placebo.filter(p =&gt; p.sex === 'man').length, womenInP = placebo.length - menInP;</span></p>
<p class="p1"><span class="s1">    document.getElementById('stratified-results-summary').innerHTML = `&lt;b&gt;Résultat final :&lt;/b&gt;&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        - &lt;b&gt;Traité (${traite.length}):&lt;/b&gt; ${menInT} H / ${womenInT} F | &lt;b&gt;Placebo (${placebo.length}):&lt;/b&gt; ${menInP} H / ${womenInP} F&lt;br&gt;</span></p>
<p class="p1"><span class="s1">        &lt;b class="text-green-700"&gt;La stratification a prévenu le déséquilibre sur le sexe !&lt;/b&gt;`;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">    createOrUpdateChart('stratifiedResultChart', {</span></p>
<p class="p1"><span class="s1">        labels: ['Traité', 'Placebo'],</span></p>
<p class="p1"><span class="s1">        datasets: [</span></p>
<p class="p1"><span class="s1">            { label: 'Hommes', data: [menInT, menInP], backgroundColor: MAN_COLOR },</span></p>
<p class="p1"><span class="s1">            { label: 'Femmes', data: [womenInT, womenInP], backgroundColor: WOMAN_COLOR }</span></p>
<p class="p1"><span class="s1">        ]</span></p>
<p class="p1"><span class="s1">    }, {</span></p>
<p class="p1"><span class="s1">        scales: { x: { stacked: true }, y: { stacked: true, beginAtZero: true } },</span></p>
<p class="p1"><span class="s1">        plugins: {</span></p>
<p class="p1"><span class="s1">            title: { display: true, text: 'Composition des groupes' },</span></p>
<p class="p1"><span class="s1">             datalabels: {</span></p>
<p class="p1"><span class="s1">                anchor: 'center',</span></p>
<p class="p1"><span class="s1">                align: 'center',</span></p>
<p class="p1"><span class="s1">                color: 'white', font: { weight: 'bold' },</span></p>
<p class="p1"><span class="s1">                formatter: (value, context) =&gt; {</span></p>
<p class="p1"><span class="s1">                    const totalInBar = context.chart.data.datasets.reduce((sum, dataset) =&gt; sum + dataset.data[context.dataIndex], 0);</span></p>
<p class="p1"><span class="s1">                    if (value === 0 || totalInBar === 0) return '';</span></p>
<p class="p1"><span class="s1">                    return `${value}\n(${(value/totalInBar*100).toFixed(0)}%)`;</span></p>
<p class="p1"><span class="s1">                }</span></p>
<p class="p1"><span class="s1">            }</span></p>
<p class="p1"><span class="s1">        }</span></p>
<p class="p1"><span class="s1">    });</span></p>
<p class="p1"><span class="s1">}</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">// Lancer la première simulation au chargement de la page</span></p>
<p class="p1"><span class="s1">window.onload = () =&gt; {</span></p>
<p class="p1"><span class="s1">    simulateSimpleRandomization();</span></p>
<p class="p1"><span class="s1">};</span></p>
<p class="p1"><span class="s1">&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"> </span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
